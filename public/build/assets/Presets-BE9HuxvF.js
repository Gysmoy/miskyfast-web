import{j as t}from"./highlightText-Cf8x2fCZ.js";import{r as s}from"./index-BH53Isel.js";import{c as C}from"./ReactAppend-QR5TrZfj.js";import{B as D}from"./Base-BH-D7crw.js";import{C as N}from"./CreateReactScript-BkuQg66_.js";import{T as y}from"./Table-BS72y2hu.js";import{I as n}from"./InputFormGroup-DrEiC8gn.js";import{R as E}from"./ReactAppend-Vm5G2nof.js";import{D as b}from"./DxButton-DV0H-ZcL.js";import{S as T}from"./SwitchFormGroup-DcdO04QX.js";import{T as k}from"./TextareaFormGroup-qAJYvfmt.js";import{M as B}from"./Modal-CjnGE3_J.js";import{S}from"./sweetalert2.esm.all-CH_YVA8w.js";import{C as P}from"./CanvasPresetsRest-C28Y7j9d.js";import"./index-yBjzXJbu.js";import"./index-B6ujFmsw.js";import"./MenuItemContainer-D-Aykn96.js";import"./index-fRpqIG3j.js";import"./index.esm-QEAFbt3Y.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";/* empty css              */import"./main-CZ_LA3zH.js";/* empty css               */import"./BasicRest-BSN0iM7g.js";const f=new P,G=({presetTypes:x={}})=>{const i=s.useRef(),h=s.useRef(),o=s.useRef(),a=s.useRef(),l=s.useRef(),c=s.useRef(),u=s.useRef(),m=s.useRef(),d=s.useRef(),[g,v]=s.useState(!1),R=e=>{e!=null&&e.id?(v(!0),o.current.value=e.id,a.current.value=e.name||"",l.current.value=e.description||"",c.current.value=e.width||"",u.current.value=e.height||"",m.current.value=e.dpi||300,d.current.value=e.background_color||"#FFFFFF"):(v(!1),o.current.value="",a.current.value="",l.current.value="",c.current.value="",u.current.value="",m.current.value=300,d.current.value="#FFFFFF"),$(h.current).modal("show")},w=async e=>{e.preventDefault();const r={id:o.current.value||void 0,name:a.current.value,description:l.current.value,width:parseFloat(c.current.value),height:parseFloat(u.current.value),dpi:parseInt(m.current.value,10),pages:0,background_color:d.current.value,type:"photo"};await f.save(r)&&($(i.current).dxDataGrid("instance").refresh(),$(h.current).modal("hide"))},F=async e=>{const{isConfirmed:r}=await S.fire({title:"Eliminar preset",text:"¿Estás seguro de eliminar este preset?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!r||!await f.delete(e)||$(i.current).dxDataGrid("instance").refresh()},j=async({id:e,value:r})=>{await f.boolean({id:e,field:"active",value:r})&&$(i.current).dxDataGrid("instance").refresh()};return t.jsxs(t.Fragment,{children:[t.jsx(y,{gridRef:i,title:"Presets de Canvas",rest:f,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(i.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo preset",hint:"Nuevo preset",onClick:()=>R()}})},columns:[{},{dataField:"name",caption:"Nombre",minWidth:200},{caption:"Dimensiones",cellTemplate:(e,{data:r})=>{e.text(`${r.width} x ${r.height} mm`)},width:150,allowFiltering:!1},{},{dataField:"dpi",caption:"DPI",width:100,alignment:"center"},{dataField:"active",caption:"Visible",dataType:"boolean",width:"80px",cellTemplate:(e,{data:r})=>{E(e,t.jsx(T,{checked:r.active,onChange:p=>j({id:r.id,value:p.target.checked})}))}},{caption:"Acciones",cellTemplate:(e,{data:r})=>{e.css("text-overflow","unset"),e.append(b({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>R(r)})),e.append(b({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>F(r.id)}))},allowFiltering:!1,allowExporting:!1}]}),t.jsx(B,{modalRef:h,title:g?"Editar preset":"Agregar preset",onSubmit:w,size:"lg",children:t.jsxs("div",{className:"row",id:"principal-container",children:[t.jsx("input",{ref:o,type:"hidden"}),t.jsx("div",{className:"col-md-6",children:t.jsx(n,{eRef:a,label:"Nombre del Preset",placeholder:"Ej: Canvas 30x40mm",required:!0})}),t.jsx("div",{className:"col-md-12",children:t.jsx(k,{eRef:l,label:"Descripción",placeholder:"Descripción del preset (opcional)",rows:2})}),t.jsx("div",{className:"col-md-3",children:t.jsx(n,{eRef:c,label:"Ancho (mm)",type:"number",min:"0.1",step:"0.1",required:!0})}),t.jsx("div",{className:"col-md-3",children:t.jsx(n,{eRef:u,label:"Alto (mm)",type:"number",min:"0.1",step:"0.1",required:!0})}),t.jsx("div",{className:"col-md-3",children:t.jsx(n,{eRef:m,label:"DPI",type:"number",min:"72",max:"1200",required:!0})}),t.jsx("div",{className:"col-md-6",children:t.jsx(n,{eRef:d,label:"Color de Fondo",type:"color"})})]})})]})};N((x,i)=>{C.createRoot(x).render(t.jsx(D,{...i,title:"Presets de Canvas",children:t.jsx(G,{...i})}))});
